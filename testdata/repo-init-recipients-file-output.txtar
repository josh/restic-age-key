env RESTIC_AGE_USER=default
env RESTIC_AGE_HOST=default.local

exec restic-age-key repo-init --repo $WORK/repo --recipients-file $WORK/recipients.json --identity-file $WORK/key1.txt --output $WORK/keyids.txt
stderr 'created restic repository [a-f0-9]{8} at'
! stdout .

exec cat $WORK/keyids.txt
stdout '^[a-f0-9]{8}\n[a-f0-9]{8}\n$'

-- key1.txt --
AGE-SECRET-KEY-16HXZ3F6C8JSN9NDFCD8XLGHKS7L39M5PVCS3A53DXX5WT9SPV65Q08EAAY

-- recipients.json --
[
    { "host": "alice.local", "user": "alice", "pubkey": "age1tmkxjxzan25j6rmjpuffq2ft8z45q75knm356qaypcczvsz4pvds46d9l7" },
    { "host": "bob.local", "user": "bob", "pubkey": "age1g5wluv38nl0vj6p3f7slgq6x4fxexwaqpqt3nctgs9n8jqf6g9wq5ywxfw" }
]
